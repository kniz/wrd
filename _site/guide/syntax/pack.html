<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>pack | namulang</title>
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="pack" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description." />
<meta property="og:description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description." />
<link rel="canonical" href="http://localhost:4000/guide/syntax/pack.html" />
<meta property="og:url" content="http://localhost:4000/guide/syntax/pack.html" />
<meta property="og:site_name" content="namulang" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="pack" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.","headline":"pack","url":"http://localhost:4000/guide/syntax/pack.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="namulang" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">namulang</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a><a class="page-link" href="/guide/syntax/aka.html">aka</a><a class="page-link" href="/guide/">quickStart</a><a class="page-link" href="/ref/index.html">ref</a><a class="page-link" href="/guide/HOW-TO-CONTRIBUTE.html">Branch</a><a class="page-link" href="/guide/feat/C-REPL.html">C-REPL</a><a class="page-link" href="/guide/feat/Prototyping%20Inheritance.html">Prototyping inheritance</a><a class="page-link" href="/guide/feat/Type%20deduction.html">Type deduction</a><a class="page-link" href="/guide/feat/chain.html">chain</a><a class="page-link" href="/guide/feat/entrypoint.html">entrypoint</a><a class="page-link" href="/guide/feat/evaluation%20verification.html">평가 검증</a><a class="page-link" href="/guide/feat/exception%20handling.html">Exception handling</a><a class="page-link" href="/guide/feat/expression%20based.html">Expression based</a><a class="page-link" href="/guide/feat/immutable.html">Immutable</a><a class="page-link" href="/guide/feat/interoperability.html">Interoperability</a><a class="page-link" href="/guide/feat/life%20cycle.html">Life cycle</a><a class="page-link" href="/guide/feat/nested%20obj.html">중첩 객체</a><a class="page-link" href="/guide/feat/null%20safety.html">null safety</a><a class="page-link" href="/guide/feat/pack%20import.html">pack import</a><a class="page-link" href="/guide/feat/scope.html">scope</a><a class="page-link" href="/guide/feat/type.html">type</a><a class="page-link" href="/guide/feat/variable-declaration.html">variable declaration</a><a class="page-link" href="/guide/goal/GOAL.html">goals</a><a class="page-link" href="/guide/syntax/blockstmt.html">block stmt</a><a class="page-link" href="/guide/syntax/casting.html">casting</a><a class="page-link" href="/guide/syntax/closure.html">closure</a><a class="page-link" href="/guide/syntax/container.html">container</a><a class="page-link" href="/guide/syntax/continue.html">continue</a><a class="page-link" href="/guide/syntax/def.html">def</a><a class="page-link" href="/guide/syntax/delegator.html">delegator</a><a class="page-link" href="/guide/syntax/expression.html">Expression</a><a class="page-link" href="/guide/syntax/for.html">for</a><a class="page-link" href="/guide/syntax/func.html">func</a><a class="page-link" href="/guide/syntax/generic.html">generic</a><a class="page-link" href="/guide/syntax/if.html">if</a><a class="page-link" href="/guide/syntax/operator.html">operator</a><a class="page-link" href="/guide/syntax/overloading.html">overloading</a><a class="page-link" href="/guide/syntax/pack.html">pack</a><a class="page-link" href="/guide/syntax/property.html">property</a><a class="page-link" href="/guide/syntax/reference.html">reference</a><a class="page-link" href="/guide/syntax/ret.html">ret</a><a class="page-link" href="/guide/syntax/specifier.html">specifier</a><a class="page-link" href="/guide/syntax/switch.html">switch</a><a class="page-link" href="/guide/syntax/variable.html">variable</a><a class="page-link" href="/guide/syntax/void.html">void</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">pack</h1>
  </header>

  <div class="post-content">
    <h1 id="pack">pack</h1>

<h2 id="worldlang-interpreter에서-attach-할-수-있는-ast-패키지를-pack이라고-한다">worldlang interpreter에서 attach 할 수 있는 AST 패키지를 pack이라고 한다.</h2>

<h2 id="c-pack-c-pack-worldlang-pack-여러가지가-있다">C pack, C++ pack, worldlang pack 여러가지가 있다.</h2>

<h2 id="확장자는-wmod">확장자는 wmod</h2>

<h2 id="팩-식별자">팩 식별자</h2>

<ul>
  <li>고유의 팩을 식별하기 위해서 다음의 구성을 사용한다.</li>
  <li>
    <p>pack는 여러개가 붙을 수 있다.</p>

    <id>.<pack>.<objname>
  kniz.example1.consoleTest
  kniz.example1.demo1.situ1.test2.consoleTest2

</objname></pack></id>
  </li>
</ul>
<h2 id="id는-고유한-것이다">id는 고유한 것이다.</h2>

<ul>
  <li>worldlang site에서 등록해야 한다.</li>
  <li>등록 방법은 비밀번호와 id만 묻는 것으로 간단하다.</li>
  <li>등록된 id로만 worldlang store에 팩을 등록할 수 있다.</li>
  <li>등록된 id로만 이 팩이 verified 된 것인지 보장할 수 있다.</li>
</ul>

<h2 id="pack은-obj다">pack은 obj다.</h2>

<h2 id="pack은-자신의-shared-scope을-중첩객체에게-포함시키는-유일한-객체다">pack은 자신의 shared scope을 중첩객체에게 포함시키는 유일한 객체다</h2>

<ul>
  <li>world는 중첩객체를 위해 특별한 동작을 하지 않는다. 중첩객체와 그것을 소유한 객체간에는 아무런 접점도 없다.</li>
  <li>그러나 pack만은 예외로써 pack의 shared scope을 pack밑에 놓인 객체와 그것의 모든 중첩객체는 반드시 pack의 shared scope을 공유해야 한다.</li>
  <li>모든 origin 객체는 반드시 1개의 pack을 지녀야만 한다.</li>
</ul>

<h2 id="pack-키워드-뒤에-나온-것이-pack-객체의-이름이-된다">pack 키워드 뒤에 나온 것이 pack 객체의 이름이 된다.</h2>

<h2 id="namu-파일은-pack의-직접적인-sub가-된다">.namu 파일은 pack의 직접적인 sub가 된다.</h2>
<ul>
  <li>.namu 파일에는 반드시 1개의 pack 키워드를 넣어서 이 파일이 어떠한 팩의 일부분인지를 표시한다.</li>
  <li>.namu 파일 밑에 나오는 origin 객체, 전역변수, 함수는 모두 pack에 바로 직속한 것이 된다.</li>
  <li>따라서 .namu 파일 안에 바로 함수를 적는 것이 허용된다.</li>
</ul>

<h2 id="pack-키워드-또한-srcframe에-origin-커스텀-func-들을-넣어두는-역할을-수행하는-것이다">pack 키워드 또한 srcframe에 origin, 커스텀 func 들을 넣어두는 역할을 수행하는 것이다.</h2>
<ul>
  <li>pack은 객체다.</li>
  <li>pack의 S에는 팩 공통 API가 들어간다.
    <ul>
      <li>getPath()</li>
      <li>getName()</li>
    </ul>
  </li>
  <li>NS에는 pack 만의 커스텀 필드/func가 들어간다.
    <ul>
      <li>origin 객체, func</li>
    </ul>
  </li>
  <li>이 NS를 srcframe에 넣어두는 것이 pack 키워드의 역할이다.</li>
</ul>

<h2 id="src-frame이란-srcfile-객체가-들고-있는-chain을-말한다">src frame이란 SrcFile 객체가 들고 있는 chain을 말한다.</h2>
<ul>
  <li>객체다.</li>
  <li>S에는 SrcFile 공통의 API가,</li>
  <li>NS에는 이 srcFrame에서 정의된 pack 키워드와 import 문들을 위한 scope들이 들어가 있다.</li>
  <li>origin 객체가 생성될때 자신이 어느 srcFile 객체로부터 나왔는지를 trace 할 수 있어야 C-REPL을 달 성할 수 있다.</li>
</ul>

<h2 id="pack은-여러개의-진입점을-가질-수-있다">pack은 여러개의 진입점을 가질 수 있다.</h2>
<ul>
  <li>world lang은 java의 native와 같은 키워드를 갖고 있지 않다.
이 말은 하나의 pack에 native객체와 mgd 객체가 혼재해 있을 수 있다는 말이된다.</li>
  <li>하나 pack의 객체로 부터 origins를 빼오는 주체를 extraction이라고 한다.</li>
  <li>여러가지 extraction 들이 predefine 되어있으며 각각 다른 언어체계로부터 origin 객체를 빼온다.</li>
  <li>한번 추출된 origin 객체는 언어의 관계없이 동일한 API 구성을 가지므로 호환성에 문제 없다.</li>
</ul>

<h2 id="packloader는-init-시에-pack을-1차로-load-한다">packLoader는 init() 시에 pack을 1차로 load 한다.</h2>
<ul>
  <li>pack은 manifest 파일, 각 entrypoint 별 load할 origin 객체들로 구성되며 1개의 파일로 배포된다.</li>
  <li>pack은 ‘wpak’ 확장자를 갖는다.</li>
  <li>packLoader는 지정한 path에 있는 pack을 재귀적으로 탐색한다.</li>
  <li>탐색한 pack의 manifest 파일만 읽는다.
    <ul>
      <li>manifest 에는 pack의 기본적인 정보와 pack path와 읽어야할 entrypoint가 기록되어있다.</li>
      <li>packLoader는 이시점에서 pack객체를 만들고 path와 매핑만 해둔다.</li>
    </ul>
  </li>
  <li>pack객체는 subs()를 처음 호출당하면 lazy하게 entrypoint들로부터 origin 객체를 extraction 시도한다.</li>
  <li>entrypoint 갯수만큼 여러개의 extraction 들이 수행될 수 있다.</li>
</ul>

<h2 id="packloader는-다양한-extraction을-가지고-있다">packLoader는 다양한 extraction을 가지고 있다.</h2>
<ul>
  <li>c++ extraction, mgd extraction, c# extraction 등</li>
</ul>

<h2 id="packloader는-subs로-자신의-origin-객체들-즉-pack을-반환할-수-있다">packLoader는 subs()로 자신의 origin 객체들, 즉 pack을 반환할 수 있다.</h2>

<h2 id="packloader는-chain-구조로-되어있다">packLoader는 chain 구조로 되어있다.</h2>
<ul>
  <li>obj이므로 당연하다.</li>
  <li>1개의 packLoader는 다른 packLoader 객체를 link 할 수 있어야 한다.</li>
</ul>

<h2 id="mgd-extraction은-interpreter-객체를-통해서-origin-객체-배열을-뽑아낸다">mgd extraction은 interpreter 객체를 통해서 origin 객체 배열을 뽑아낸다.</h2>
<ul>
  <li>extraction은 interpreter에게 해석할 파일들을 전달하면서 link할 defaultPackLoader도 같이 넘긴다.</li>
  <li>interpreter는 packLoader객체를 하나 만들고 넘겨받은 packLoader객체를 link한다.
    <ul>
      <li>이 packLoader는 subs()에서 defaultPackLoader의 것들까지 포함해서 반환할 것이다.</li>
    </ul>
  </li>
  <li>interpreter가 추출한 origin 객체들은 모두 생성한 packLoader의 container에 넣는다.
    <ul>
      <li>link()의 packLoader에 넣는게 아니다.</li>
    </ul>
  </li>
  <li>1차로 추출된 이후, verification 한다.
    <ul>
      <li>packerLoader의 container 부분만 검증한다.</li>
      <li>scope을 찾을때는 packLoader.sub()를 검색하므로 defaultPackLoader.subs()도 검색하게 된다.</li>
    </ul>
  </li>
  <li>이상이 없다면 packLoader의 container 부분을 defaultPackLoader에 add한다.</li>
</ul>

<h2 id="app도-pack이-될-수-있다-pack을-모듈로-사용하던-app으로-사용하던-차이가-없다">app도 pack이 될 수 있다. pack을 모듈로 사용하던 app으로 사용하던 차이가 없다.</h2>
<ul>
  <li>내부적으로는 2개 모두 pack으로 취급한다.</li>
  <li>main()이 있으면 먼저 main() 실행한다.</li>
  <li>2개 모두 동일하게 packLoader로부터 읽혀진다.</li>
  <li>2개 모두 동일하게 manifest를 먼저 읽는다.</li>
  <li>즉, project == app 또한 packLoader가 읽어들인다.</li>
</ul>

<h2 id="main이-담긴-pack을-배포할수-있다">main()이 담긴 pack을 배포할수 있다.</h2>
<ul>
  <li>android를 떠올려보면 java main()이 android sdk 안에 있다는걸 알 수있다.
이와 같은 pack이 될 것이다.</li>
</ul>

<h2 id="클래스는-항상-어떤-pack-안에-있다">클래스는 항상 어떤 pack 안에 있다.</h2>
<ul>
  <li>동일한 pack 내에 다른 클래스를 사용할때는 with(== import)를 하지 않아도 되는 이유는,
2개가 같은 pack scope안에 있기 때문에 불과하다.</li>
  <li>다른 pack안에 있는 클래스를 접근할때에는 pack을 먼저 접근하는 것이 원칙이다.</li>
  <li>그러나 매번 이렇게 하면 힘드므로 with 문을 주로 사용한다.</li>
</ul>

<pre><code class="language-namu">// myapp pack scope:
mymodule.person.foo() // 1

    with mymodule
    person.foo() // 2
</code></pre>

<ul>
  <li>interpreter는 시작시 mymodule을 pack의 scope에도 넣어둔다.</li>
  <li>filescope은 packscope을 link 시킨다.</li>
  <li>filescope에 import가 나올 경우 이 pack의 subs()를 모두 filescope에 추가해둔다.</li>
  <li>이미 다른 문서에서 언급했다시피 동일한 frame 객체 내에 2개 이상의 이름이 verify단계에서 검출하면
에러다.</li>
  <li>실제 runtime에서는 가장 먼저 이름과 일치하는 객체로 바로 실행한다. 2개 이상의 이름이 있는지 verify
를 하지 않는다.</li>
</ul>


  </div>

</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">namulang</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">namulang</li><li><a class="u-email" href="mailto:knizofficial@gmail.com">knizofficial@gmail.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/kniz"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">kniz</span></a></li><li><a href="https://www.twitter.com/kniz_net"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">kniz_net</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
